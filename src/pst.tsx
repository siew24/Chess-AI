import { Piece } from "./piece";

// Piece-Square Table
const pst: {[key: string]: Array<Array<number>>} = {
    'Pawn': [[100, 100, 100, 100, 100, 100, 100, 100],
             [50, 50, 50, 50, 50, 50, 50, 50],
             [10, 10, 20, 30, 30, 20, 10, 10],
             [ 5,  5, 10, 25, 25, 10,  5,  5],  // PST for Pawn Piece
             [ 0,  0,  0, 20, 20,  0,  0,  0],
             [ 5, -5,-10,  0,  0,-10, -5,  5],
             [ 5, 10, 10,-20,-20, 10, 10,  5],
             [ 0,  0,  0,  0,  0,  0,  0,  0]],
            
    'Knight': [[-50, -40, -30, -30, -30, -30, -40, -50],
               [-40, -20,   0,   0,   0,   0, -20, -40],
               [-30,   0,  10,  15,  15,  10,   0, -30],
               [-30,   5,  15,  20,  20,  15,   5, -30],    // PST for Knight Piece
               [-30,   0,  15,  20,  20,  15,   0, -30],
               [-30,   5,  10,  15,  15,  10,   5, -30],
               [-40, -20,   0,   5,   5,   0, -20, -40],
               [-50, -40, -30, -30, -30, -30, -40, -50]],
            
    'Bishop': [[-20, -10, -10, -10, -10, -10, -10, -20],
               [-10,   0,   0,   0,   0,   0,   0, -10],
               [-10,   0,   0,   0,   0,   0,   0, -10],
               [-10,   5,   5,  10,  10,   5,   5, -10],    // PST for Bishop Piece
               [-10,   0,  10,  10,  10,  10,   0, -10],
               [-10,  10,  10,  10,  10,  10,  10, -10],
               [-10,   5,   0,   0,   0,   0,   5, -10],
               [-20, -10, -10, -10, -10, -10, -10, -20]],
            
    'Rook': [[ 0,  0,  0,  0,  0,  0,  0,  0],
             [ 5, 10, 10, 10, 10, 10, 10,  5],
             [-5,  0,  0,  0,  0,  0,  0, -5],
             [-5,  0,  0,  0,  0,  0,  5, -5],  // PST for Rook Piece
             [-5,  0,  0,  0,  0,  0,  0, -5],
             [-5,  0,  0,  0,  0,  0,  0, -5],
             [-5,  0,  0,  0,  0,  0,  0, -5],
             [ 0,  0,  0,  5,  5,  0,  0,  0]],
            
    'Queen': [[-20, -10, -10, -5, -5, -10, -10, -20],
              [-10,   0,   0,  0,  0,   0,   0, -10],
              [-10,   0,   5,  5,  5,   5,   0, -10],
              [ -5,   0,   5,  5,  5,   5,   0,  -5],   // PST for Queen Piece
              [  0,   0,   5,  5,  5,   5,   0,  -5],
              [-10,   5,   5,  5,  5,   5,   0,  -5],
              [-10,   0,   5,  0,  0,   0,   0, -10],
              [-20, -10, -10, -5, -5, -10, -10, -20]],
            
    'King': [[-30, -40, -40, -50, -50, -40, -40, -30],
             [-30, -40, -40, -50, -50, -40, -40, -30],
             [-30, -40, -40, -50, -50, -40, -40, -30],
             [-30, -40, -40, -50, -50, -40, -40, -30],  // PST for King Piece
             [-20, -30, -30, -40, -40, -30, -30, -20],
             [-10, -20, -20, -20, -20, -20, -20, -10],
             [ 20,  20,   0,   0,   0,   0,  20,  20],
             [ 20,  30,  10,   0,   0,  10,  30,  20]]
};


// To modify the Piece Value 
export function modifyPieceValue(piece: Piece) {

    let color = piece.color;

    // Check if the piece is a white piece or a black piece
    if (color === 'W') { // White Piece (Setting the piece value)

        piece.setValue(pst[piece.name][piece.position.y][piece.position.x]);

    } else { //Black Piece (The whole PST will be flipped upside down due to the black perspective, so 7-piece.position.y is used here to flip the y level)

        piece.setValue(pst[piece.name][7 - piece.position.y][piece.position.x]);
    }
}